{% load static %}
{% comment %} 
 - Django template tag - Loads the static files system
 - Must be at the top of any template using static files
{% endcomment %}
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Todo List App{% endblock %}</title>
    {% comment %} {% block title %} - Creates a 'slot' that child templates can override {% endcomment %}
    {% comment %} Default value: 'Todo List App' {% endcomment %}
    {% comment %} Child can override: {% block title %}Edit Task{% endblock %} {% endcomment %}

    <!-- Tailwind CSS + DaisyUI (compiled) -->
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
</head>
<body class="min-h-screen bg-base-200">
    <!-- Navigation Bar -->
    <nav class="navbar bg-base-100 shadow-lg">
        <div class="flex-1">
            <a href="{% url 'tasks:task_list' %}" class="btn btn-ghost text-xl">
                üìù Todo List
            </a>
        </div>
        <div class="flex-none gap-2">
            {% if user.is_authenticated %}
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button" class="btn btn-ghost">
                        Welcome, <span class="font-bold">{{ user.username }}</span>
                    </div>
                    <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                        <li>
                            <form method="post" action="{% url 'logout' %}">
                                {% csrf_token %}
                                <button type="submit" class="w-full text-left">
                                    Logout
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
            {% endif %}
            {% comment %} {{ user.name }} - Template variable (displays data) {% endcomment %}
            {% comment %} {% if %} - Template tag (logic) {% endcomment %}
            {% comment %} {% url 'login' %} - Generates URL from name (reverse URL lookup) {% endcomment %}
            {% comment %} user is automatically available in templates (from context processors) {% endcomment %}

        </div>
    </nav>

    <!-- Django Messages -->
    {% if messages %}
        <div class="container mx-auto px-4 pt-4">
            {% for message in messages %}
                <div role="alert" class="alert {% if message.tags == 'error' %}alert-error{% elif message.tags == 'success' %}alert-success{% elif message.tags == 'warning' %}alert-warning{% else %}alert-info{% endif %} mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>{{ message }}</span>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% comment %} 
     - Displays Django messages from your views
     - Remember: messages.success(request, 'Task Created!') in views.py
     - message.tags = "success", "error", "warning", "info"

    {% endcomment %}
    

    <!-- Main Content Area -->
    <main class="container mx-auto px-4 py-8">
        {% block content %}
        <!-- Child templates will fill this block -->
        {% endblock %}
    </main>
    {% comment %} 
     - The main content Area
     - Every child template will put their unique content here
    
    {% endcomment %}


    <!-- Footer -->
    <footer class="footer footer-center bg-base-300 text-base-content p-4 mt-8">
        <aside>
            <p>&copy; 2026 Todo List App | Built with Django + Tailwind CSS + DaisyUI</p>
        </aside>
    </footer>
</body>
</html>
